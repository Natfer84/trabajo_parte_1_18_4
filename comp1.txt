import React, { useState } from 'react';
import TaskForm from './TaskForm';  // Componente para el formulario
import TaskEditForm from './TaskEditForm';  // Componente para el formulario de ediciÃ³n

function App() {
  const [tasks, setTasks] = useState([]);
  const [isEditing, setIsEditing] = useState(false);
  const [taskToEdit, setTaskToEdit] = useState(null);

  const addTask = (task) => {
    setTasks([...tasks, task]);
  };

  const editTask = (task) => {
    setTaskToEdit(task);
    setIsEditing(true);
  };

  const updateTask = (updatedTask) => {
    setTasks(tasks.map(task => task.id === updatedTask.id ? updatedTask : task));
    setIsEditing(false);
    setTaskToEdit(null);
  };

  const cancelEdit = () => {
    setIsEditing(false);
    setTaskToEdit(null);
  };

  return (
    <div className="App">
      <header>
        <img src="logo.png" alt="Logo" />
        <h1>Tu aplicacion To Do</h1>
      </header>
      <main>
        <div className="card text-white bg-info mb-6 offset-md-3 divPrincipal display">
          <div className="card-header"><h2>Formulario Tareas</h2></div>
          <div className="card-body">
            {isEditing ? (
              <TaskEditForm
                task={taskToEdit}
                updateTask={updateTask}
                cancelEdit={cancelEdit}
              />
            ) : (
              <TaskForm addTask={addTask} />
            )}
          </div>
        </div>

        <h3>Listado de tareas existentes</h3>
        <div id="task-container">
          {tasks.map((task) => (
            <div key={task.id}>
              <h4>{task.title}</h4>
              <p>{task.description}</p>
              <button onClick={() => editTask(task)} className="btn btn-lg btn-success">Editar</button>
            </div>
          ))}
        </div>
      </main>
    </div>
  );
}

export default App;
